<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>å®šä½+åœ°å›¾</title>
    <style>#map { width:100%; height:500px; }</style>
</head>
<body>
    <h1>ğŸï¸ å®šä½ + åœ°å›¾æ˜¾ç¤º</h1>
    
    <button onclick="getLocationAndShowMap()" style="padding:15px 30px;">
        ğŸ“ å®šä½å¹¶æ˜¾ç¤ºåœ¨åœ°å›¾
    </button>
    
    <div id="map"></div>
    <div id="result" style="margin-top:20px; padding:20px;"></div>
    
    <!-- åŸºç¡€åœ°å›¾ -->
    <script src="https://webapi.amap.com/maps?v=1.4.15&key=977b6123358698744cd4f2a96e219145"></script>
    
    <script>
        let map = null;
        let marker = null;
        
        // åˆå§‹åŒ–åœ°å›¾ï¼ˆæ— ä¸­å¿ƒç‚¹ï¼‰
        function initMap() {
            map = new AMap.Map('map', {
                zoom: 15,
                resizeEnable: true
            });
            console.log('åœ°å›¾åˆå§‹åŒ–å®Œæˆ');
        }
        
        function getLocationAndShowMap() {
            document.getElementById('result').innerHTML = 'å®šä½ä¸­...';
            
            // åªç”¨æµè§ˆå™¨å®šä½
            navigator.geolocation.getCurrentPosition(
                function(pos) {
                    const lat = pos.coords.latitude;
                    const lng = pos.coords.longitude;
                    
                    // è®¾ç½®åœ°å›¾ä¸­å¿ƒ
                    map.setCenter([lng, lat]);
                    
                    // æ·»åŠ æ ‡è®°
                    if (marker) {
                        map.remove(marker);
                    }
                    marker = new AMap.Marker({
                        position: [lng, lat],
                        map: map
                    });
                    
                    document.getElementById('result').innerHTML = 
                        'âœ… å®šä½æˆåŠŸå¹¶æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Š';
                },
                function(err) {
                    document.getElementById('result').innerHTML = 
                        'âŒ å®šä½å¤±è´¥: ' + err.message;
                }
            );
        }
        
        // åˆå§‹åŒ–
        window.onload = initMap;
    </script>
</body>
</html>
